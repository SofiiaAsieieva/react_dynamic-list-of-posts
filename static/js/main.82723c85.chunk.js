(this["webpackJsonpreact_dynamic-list-of-posts"]=this["webpackJsonpreact_dynamic-list-of-posts"]||[]).push([[0],[,,,,,,,,,function(e,t,n){e.exports=n(20)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),o=n(7),r=n.n(o),s=n(1),l=(n(14),n(15),n(16),"https://mate-api.herokuapp.com");function u(e){return fetch("".concat(l,"/").concat(e)).then((function(e){if(e)return e.json()}))}var i=function(e){var t=e.selectUserId,n=e.selectedPostId,o=Object(a.useState)([]),r=Object(s.a)(o,2),l=r[0],i=r[1],m=Object(a.useState)(0),d=Object(s.a)(m,2),f=d[0],p=d[1],b=function(){n(!1,0),p(0)};return Object(a.useEffect)((function(){(function(e){var t=u("posts");return e?t.then((function(t){return t.data.filter((function(t){return t.userId===e}))})):t.then((function(e){return e.data}))})(t).then(i)}),[t]),c.a.createElement("div",{className:"PostsList"},c.a.createElement("h2",null,"Posts:"),c.a.createElement("ul",{className:"PostsList__list"},l.map((function(e){return c.a.createElement("li",{key:e.id,className:"PostsList__item"},c.a.createElement("div",null,c.a.createElement("b",null,"[User #".concat(e.userId,"]:")),e.title),f!==e.id?c.a.createElement("button",{type:"button",className:"PostsList__button button",onClick:function(t){return a=e.id,n(!0,a),void p(a);var a}},"Open"):c.a.createElement("button",{type:"button",className:"PostsList__button button",onClick:b},"Close"))}))))},m=n(8),d=n(5),f=n(3),p=(n(17),function(e){var t=e.addCommentInPostDetails,n=e.postId,o=Object(a.useState)({name:"",email:"",body:""}),r=Object(s.a)(o,2),u=r[0],i=r[1],m=function(e){var t=e.target,n=t.name,a=t.value;i((function(e){return Object(f.a)(Object(f.a)({},e),{},Object(d.a)({},n,a))}))},p=function(e){e.preventDefault();var a,c=Object(f.a)(Object(f.a)({id:(new Date).getTime(),postId:n},u),{},{createdAt:String(new Date),updatedAt:String(new Date)});t(c),a=c,fetch("".concat(l,"/comments"),{method:"POST",headers:{"Content-type":"application/json; charset=utf-8"},body:JSON.stringify({id:a.id,postId:a.postId,name:a.name,email:a.email,body:a.body})}).catch((function(e){throw new Error(e)})),i({name:"",email:"",body:""})};return c.a.createElement("form",{className:"NewCommentForm",onSubmit:function(e){return p(e)}},c.a.createElement("div",{className:"form-field"},c.a.createElement("input",{type:"text",name:"name",placeholder:"Your name",className:"NewCommentForm__input",value:u.name,onChange:function(e){return m(e)}})),c.a.createElement("div",{className:"form-field"},c.a.createElement("input",{type:"text",name:"email",placeholder:"Your email",className:"NewCommentForm__input",value:u.email,onChange:function(e){return m(e)}})),c.a.createElement("div",{className:"form-field"},c.a.createElement("textarea",{name:"body",placeholder:"Type comment here",className:"NewCommentForm__input",value:u.body,onChange:function(e){return m(e)}})),c.a.createElement("button",{type:"submit",className:"NewCommentForm__submit-button button"},"Add a comment"))}),b=(n(18),n(19),function(){return c.a.createElement("div",{className:"Loader"},c.a.createElement("div",{className:"Loader__content"}))}),E=function(e){var t=e.postId,n=Object(a.useState)({}),o=Object(s.a)(n,2),r=o[0],i=o[1],d=Object(a.useState)([]),f=Object(s.a)(d,2),E=f[0],h=f[1],_=Object(a.useState)(!1),N=Object(s.a)(_,2),v=N[0],O=N[1],j=function(e){!function(e){fetch("".concat(l,"/comments/").concat(e),{method:"DELETE"}).catch((function(e){throw new Error(e)}))}(e),h((function(t){return t.filter((function(t){return t.id!==e}))}))};return Object(a.useEffect)((function(){(function(e){if(e)return u("posts/".concat(e)).then((function(e){return e.data}))})(t).then(i),function(e){return u("comments").then((function(t){return t.data.filter((function(t){return t.postId===e}))}))}(t).then(h)}),[t]),0===r.length?c.a.createElement(b,null):c.a.createElement("div",{className:"PostDetails"},c.a.createElement("h2",null,"Post details:"),c.a.createElement("section",{className:"PostDetails__post"},c.a.createElement("p",null,r.title)),E.length>0?c.a.createElement(c.a.Fragment,null,c.a.createElement("button",{type:"button",className:"button",onClick:function(){O(!v)}},v?"Show ".concat(E.length," comments"):"Hide ".concat(E.length," comments")),c.a.createElement("section",{className:"PostDetails__comments",hidden:v},c.a.createElement("ul",{className:"PostDetails__list"},E.map((function(e){return c.a.createElement("li",{key:e.id,className:"PostDetails__list-item"},c.a.createElement("button",{type:"button",className:"PostDetails__remove-button button",onClick:function(t){return j(e.id)}},"X"),c.a.createElement("p",null,e.body))})))),c.a.createElement("section",{hidden:v},c.a.createElement("div",{className:"PostDetails__form-wrapper"},c.a.createElement(p,{addCommentInPostDetails:function(e){h((function(t){return[].concat(Object(m.a)(t),[e])}))},postId:t})))):c.a.createElement(b,null))},h=function(){var e=Object(a.useState)([]),t=Object(s.a)(e,2),n=t[0],o=t[1],r=Object(a.useState)(0),l=Object(s.a)(r,2),m=l[0],d=l[1],f=Object(a.useState)(0),p=Object(s.a)(f,2),b=p[0],h=p[1],_=Object(a.useState)(!1),N=Object(s.a)(_,2),v=N[0],O=N[1];return Object(a.useEffect)((function(){u("users").then((function(e){return e.data.filter((function(e){return e.id<=10})).sort((function(e,t){return e.id-t.id}))})).then(o)}),[]),c.a.createElement("div",{className:"App"},c.a.createElement("header",{className:"App__header"},c.a.createElement("label",null,"Select a user: \xa0",c.a.createElement("select",{className:"App__user-selector",name:"selectUserId",value:m,onChange:function(e){return function(e){var t=e.target.value;d(t)}(e)}},c.a.createElement("option",{value:"0"},"All users"),n.map((function(e){return c.a.createElement("option",{key:e.id,value:e.id},e.name)}))))),c.a.createElement("main",{className:"App__main"},c.a.createElement("div",{className:"App__sidebar"},c.a.createElement(i,{selectUserId:Number(m),selectedPostId:function(e,t){O(e),h(t)}})),v&&c.a.createElement("div",{className:"App__content"},c.a.createElement(E,{postId:b}))))};r.a.render(c.a.createElement(h,null),document.getElementById("root"))}],[[9,1,2]]]);
//# sourceMappingURL=main.82723c85.chunk.js.map